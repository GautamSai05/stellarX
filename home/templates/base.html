<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}StellarSense{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#19191A] text-[#494A4D] font-sans relative">

    <!-- Header (formerly Navbar) -->
    <header class="bg-[#1D1D1E] p-4 flex justify-between items-center shadow-lg">
        <a href="{% url 'home' %}">
            <h1 class="text-xl font-bold text-[#494A4D] hover:text-[#49467B] transition duration-300 ease-in-out">StellarSense</h1>
        </a>
        <button id="sidebar-toggle" class="text-[#494A4D] focus:outline-none md:hidden">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
            </svg>
        </button>
        <!-- Desktop Navigation (remains horizontal for larger screens) -->
        <div class="hidden md:flex items-center space-x-6">
            <a href="{% url 'crowdfunding' %}" class="text-[#494A4D] hover:text-[#49467B] text-lg font-medium hover:scale-105 transition duration-300 ease-in-out">Funding</a>
            {% if user.is_authenticated %}
                <a href="{% url 'profile' user.username %}" class="text-[#494A4D] hover:text-[#49467B] text-lg font-medium hover:scale-105 transition duration-300 ease-in-out">My Profile</a>
                <span class="text-[#494A4D]">Hi, {{ user.username }}</span>
                <form action="{% url 'logout' %}" method="post" class="inline">
                    {% csrf_token %}
                    <button type="submit" class="bg-[#49467B] hover:bg-[#49467B] text-white font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out shadow-md transform hover:scale-105">Logout</button>
                </form>
            {% else %}
                <a href="{% url 'login' %}" class="text-[#494A4D] hover:text-[#49467B] text-lg font-medium hover:scale-105 transition duration-300 ease-in-out">Login</a>
                <a href="{% url 'signup' %}" class="bg-[#49467B] hover:bg-[#49467B] text-white font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out shadow-md transform hover:scale-105">Sign Up</a>
            {% endif %}
        </div>
    </header>

    <!-- Slide-out Sidebar -->
    <div id="sidebar" class="fixed top-0 left-0 w-64 h-full bg-[#19191A] shadow-xl transform -translate-x-full transition-transform duration-300 ease-in-out z-40">
        <div class="p-4 border-b border-[#494A4D] flex justify-between items-center">
            <h2 class="text-xl font-bold text-[#494A4D]">Menu</h2>
            <button id="sidebar-close" class="text-[#494A4D] focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        <nav class="flex flex-col p-4 space-y-4">
            <a href="{% url 'crowdfunding' %}" class="text-[#494A4D] hover:text-[#49467B] text-xl font-medium hover:scale-105 transition duration-300 ease-in-out"> funding</a>
            {% if user.is_authenticated %}
                <a href="{% url 'profile' user.username %}" class="text-[#494A4D] hover:text-[#49467B] text-xl font-medium hover:scale-105 transition duration-300 ease-in-out">My Profile</a>
                <span class="text-[#494A4D] text-xl">Hi, {{ user.username }}</span>
                <form action="{% url 'logout' %}" method="post" class="inline">
                    {% csrf_token %}
                    <button type="submit" class="text-[#494A4D] hover:text-[#49467B] text-xl font-medium hover:scale-105 transition duration-300 ease-in-out text-left">Logout</button>
                </form>
            {% else %}
                <a href="{% url 'login' %}" class="text-[#494A4D] hover:text-[#49467B] text-xl font-medium hover:scale-105 transition duration-300 ease-in-out">Login</a>
                <a href="{% url 'signup' %}" class="text-[#494A4D] hover:text-[#49467B] text-xl font-medium hover:scale-105 transition duration-300 ease-in-out">Sign Up</a>
            {% endif %}
        </nav>
    </div>

    <!-- Overlay for when sidebar is open -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-black opacity-0 pointer-events-none transition-opacity duration-300 ease-in-out z-30"></div>

    <!-- Main Content -->
    <main class="p-6 max-w-6xl mx-auto animate-fade-in">
        {% block content %}{% endblock %}
    </main>

    <style>
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.8s ease-out forwards;
        }
    </style>

    <script>
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const sidebar = document.getElementById('sidebar');
        const sidebarClose = document.getElementById('sidebar-close');
        const sidebarOverlay = document.getElementById('sidebar-overlay');

        function openSidebar() {
            sidebar.classList.remove('-translate-x-full');
            sidebar.classList.add('translate-x-0');
            sidebarOverlay.classList.remove('pointer-events-none');
            sidebarOverlay.classList.add('opacity-50');
        }

        function closeSidebar() {
            sidebar.classList.remove('translate-x-0');
            sidebar.classList.add('-translate-x-full');
            sidebarOverlay.classList.remove('opacity-50');
            sidebarOverlay.classList.add('pointer-events-none');
        }

        sidebarToggle.addEventListener('click', openSidebar);
        sidebarClose.addEventListener('click', closeSidebar);
        sidebarOverlay.addEventListener('click', closeSidebar);

        // Close sidebar on navigation link click (optional, but good UX)
        document.querySelectorAll('#sidebar a').forEach(link => {
            link.addEventListener('click', closeSidebar);
        });
    </script>

    {% block extra_body_content %}{% endblock %}

</body>
</html>
