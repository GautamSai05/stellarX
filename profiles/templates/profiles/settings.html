{% extends 'base.html' %}
{% load widget_tweaks %}

{% block title %}Profile Settings - StellarSense{% endblock %}

{% block content %}
<div class="space-y-8 max-w-3xl mx-auto">
    <div>
        <h1 class="text-5xl font-extrabold mb-4 text-white animate-pulse">Profile Settings</h1>
        <p class="text-xl text-gray-400 leading-relaxed">
            Customize your profile and manage your space weather alert preferences.
        </p>
    </div>

    <!-- Settings Form -->
    <div class="bg-black rounded-xl shadow-xl p-8 border border-gray-700">
        <h2 class="text-3xl font-semibold mb-6 text-white">Alert Preferences</h2>
        
        {% if messages %}
            {% for message in messages %}
                <div class="mb-6 p-4 rounded-lg {% if message.tags == 'success' %}bg-green-900 border border-green-600{% else %}bg-blue-900 border border-blue-600{% endif %}">
                    <p class="text-white">{{ message }}</p>
                </div>
            {% endfor %}
        {% endif %}

        <form method="post" class="space-y-6">
            {% csrf_token %}
            
            <!-- Profession/Interest Field -->
            <div>
                <label for="{{ form.profession.id_for_label }}" class="block text-lg font-semibold text-white mb-2">
                    {{ form.profession.label }}
                </label>
                <p class="text-sm text-gray-400 mb-3">{{ form.profession.help_text }}</p>
                {{ form.profession }}
                {% if form.profession.errors %}
                    <p class="text-red-500 text-sm mt-2">{{ form.profession.errors.0 }}</p>
                {% endif %}
            </div>

            <!-- Alert Opt-in Field -->
            <div class="flex items-start space-x-3">
                {{ form.receive_alerts }}
                <div>
                    <label for="{{ form.receive_alerts.id_for_label }}" class="block text-lg font-semibold text-white">
                        {{ form.receive_alerts.label }}
                    </label>
                    <p class="text-sm text-gray-400 mt-1">{{ form.receive_alerts.help_text }}</p>
                </div>
                {% if form.receive_alerts.errors %}
                    <p class="text-red-500 text-sm mt-2">{{ form.receive_alerts.errors.0 }}</p>
                {% endif %}
            </div>

            <!-- Information Box -->
            <div class="bg-[#0F0F10] p-6 rounded-lg border border-gray-600">
                <h3 class="text-xl font-semibold text-white mb-3">What are Targeted Alerts?</h3>
                <p class="text-gray-400 mb-4 leading-relaxed">
                    Based on your selected interest or profession, you'll receive customized space weather alerts that matter most to you:
                </p>
                <ul class="space-y-2 text-gray-400">
                    <li class="flex items-start">
                        <span class="text-white mr-2">üåü</span>
                        <span><strong class="text-white">Stargazers:</strong> Aurora alerts and solar activity notifications for enhanced viewing opportunities</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-white mr-2">üöú</span>
                        <span><strong class="text-white">Farmers:</strong> GPS disruption warnings for precision agriculture equipment</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-white mr-2">‚úàÔ∏è</span>
                        <span><strong class="text-white">Pilots:</strong> Radio blackout and radiation storm alerts affecting aviation</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-white mr-2">üìö</span>
                        <span><strong class="text-white">Educators:</strong> Educational opportunities to discuss space weather with students</span>
                    </li>
                </ul>
            </div>

            <!-- Action Buttons -->
            <div class="flex space-x-4">
                <button type="submit" class="inline-block 
                    bg-white text-black 
                    hover:bg-black hover:text-white 
                    font-bold py-3 px-8 rounded-full 
                    transition duration-300 ease-in-out 
                    shadow-lg transform hover:scale-105
                    hover:shadow-[0_0_0_4px_white]">
                    Save Settings
                </button>
                <a href="{% url 'profile' user.username %}" class="inline-block 
                    bg-gray-700 text-white 
                    hover:bg-gray-600
                    font-bold py-3 px-8 rounded-full 
                    transition duration-300 ease-in-out 
                    shadow-lg transform hover:scale-105">
                    Cancel
                </a>
            </div>
        </form>
    </div>

    <!-- Current Settings Display -->
    <div class="bg-black rounded-xl shadow-xl p-8 border border-gray-700">
        <h2 class="text-3xl font-semibold mb-6 text-white">Current Settings</h2>
        <div class="space-y-4">
            <div class="flex justify-between items-center border-b border-gray-700 pb-4">
                <span class="text-gray-400">Interest/Profession:</span>
                <span class="text-white font-semibold">{{ profile.get_profession_display }}</span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-gray-400">Alerts Status:</span>
                <span class="{% if profile.receive_alerts %}text-green-400{% else %}text-red-400{% endif %} font-semibold">
                    {% if profile.receive_alerts %}Enabled{% else %}Disabled{% endif %}
                </span>
            </div>
        </div>
    </div>
</div>
{% endblock %}
